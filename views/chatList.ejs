<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat List</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 p-6">

  <h1 class="text-3xl mb-6">Your Chats</h1>

  <ul>
    <% if (chatUsers.length === 0) { %>
      <p class="text-center text-gray-400">No chats yet. Start a conversation!</p>
    <% } %>

    <% chatUsers.forEach(user => { %>
      <li class="mb-4">
        <a href="/chat/<%= user.id %>" class="flex items-center gap-4 p-3 bg-white rounded-xl shadow hover:bg-gray-50 transition group relative">
          <div class="relative">
            <img src="<%= user.profileImage %>" alt="<%= user.name %>" class="w-14 h-14 rounded-full object-cover border-2 border-indigo-200 group-hover:border-indigo-400" />
            <% if (user.online) { %>
              <span class="absolute bottom-1 right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"></span>
            <% } %>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex items-center justify-between">
              <span class="font-semibold text-lg text-gray-800 truncate"><%= user.name %></span>
              <% if (user.unreadCount && user.unreadCount > 0) { %>
                <span class="bg-pink-500 text-white text-xs px-2 py-1 rounded-full ml-2"> <%= user.unreadCount %> </span>
              <% } %>
            </div>
            <% if (user.lastMessage) { %>
              <span class="block text-sm text-gray-500 truncate"><%= user.lastMessage %></span>
            <% } %>
          </div>
        </a>
      </li>
    <% }) %>
  </ul>

  <a href="/dashboard" class="text-indigo-600 hover:underline mt-6 inline-block">Back to Dashboard</a>

</body>
</html>